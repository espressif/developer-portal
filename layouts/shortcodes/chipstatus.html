<div id="content"></div>

<script>
  const url = '{{ .Get "url" }}';  // Get the URL from the shortcode parameter

  fetch(url)  // Fetch the JSON data from the parameterized URL
    .then(response => response.json())
    .then(jsonData => {
      let htmlContent = '';

      Object.keys(jsonData).forEach(sectionName => {
        const section = jsonData[sectionName];
        htmlContent += `<h3>${section.title || sectionName}</h3>`;

        if (section.items && Array.isArray(section.items)) {
          htmlContent += '<ul>';
          section.items.forEach(item => {
            htmlContent += '<li>';

            if (item.item) htmlContent += item.item;
            if (item.name) htmlContent += item.name;

            if (item.subitems && Array.isArray(item.subitems)) {
              htmlContent += '<ul>';
              item.subitems.forEach(subitem => {
                htmlContent += '<li>';

                if (subitem.item) htmlContent += subitem.item;

                if (subitem.subsubitems && Array.isArray(subitem.subsubitems)) {
                  htmlContent += '<ul>';
                  subitem.subsubitems.forEach(subsubitem => {
                    htmlContent += `<li>${subsubitem}</li>`;
                  });
                  htmlContent += '</ul>';
                }

                htmlContent += '</li>';
              });
              htmlContent += '</ul>';
            }

            htmlContent += '</li>';
          });
          htmlContent += '</ul>';
        }
      });

      // Insert the generated content into the 'content' div
      document.getElementById('content').innerHTML = htmlContent;
    })
    .catch(error => {
      console.error('Error fetching the JSON data:', error);
    });
</script>
