{{ $uniqueID := .Get "jsonKey" | urlize }} <!-- Generate a unique ID -->
<div id="content-{{ $uniqueID }}">Loading...</div>

{{ $contentPath := .Get "contentPath" }}
{{ $jsonKey := .Get "jsonKey" }}
{{ $fullURL := printf "%s%s" .Site.BaseURL $contentPath }}

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const url = '{{ $fullURL }}';
    const jsonKey = '{{ $jsonKey }}';
    const uniqueID = '{{ $uniqueID }}';

    fetch(url) // Fetch the JSON file
      .then(response => {
        if (!response.ok) {
          throw new Error('Error fetching the JSON data');
        }
        return response.json();
      })
      .then(data => {
        if (!data[jsonKey]) {
          throw new Error(`Key "${jsonKey}" not found in the JSON data`);
        }

        // Extract the value for the key and convert the markdown to HTML
        let markdown = data[jsonKey];
        let htmlContent = marked.parse(markdown);

        // Inject the HTML into the unique content div
        document.getElementById(`content-${uniqueID}`).innerHTML = htmlContent;
      })
      .catch(error => {
        document.getElementById(`content-${uniqueID}`).textContent = 'Error loading content: ' + error.message;
      });
  });
</script>
